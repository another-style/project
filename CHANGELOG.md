# Changelog

## 2026-02-20

### Добавлено
- **Закрепление комментариев (pin)** — администратор может закреплять темы через админку Filament. Закреплённые темы отображаются первыми на главной странице с визуальным бейджем «Закреплено». Авторизация через permission `Comment.pin`.
- **Разметка Markdown** — комментарии и посты теперь поддерживают форматирование Markdown (заголовки, жирный, курсив, зачёркнутый текст, списки, цитаты, код, горизонтальные линии) через библиотеку `league/commonmark`.
- **Теги** — возможность привязывать теги к комментариям (связь many-to-many).
- **Rate Limiter** — ограничение частоты запросов для защиты от злоупотреблений.
- **Описание проекта** — добавлено описание в README.

### Исправлено
- Правки в CSS-стилях.
- Исправлено отображение переносов строк — одиночный перенос строки теперь корректно рендерится как `<br>` в Markdown.
- Добавлена поддержка заголовков (`h1`–`h6`) и горизонтальных линий (`hr`) в Markdown-рендерере и CSS-стилях.

## 2026-02-19

### Добавлено
- **Лайки и дизлайки** — система голосования за комментарии (привязка по IP).
- **Адаптивная вёрстка** — адаптация интерфейса под мобильные устройства и малые экраны.
- **Навигация** — добавлена ссылка на главную страницу.

### Исправлено
- Изменён формат URL последнего комментария в теме.
- Обновлён `CLAUDE.md` с актуальной документацией по проекту.

## 2026-02-18

### Добавлено
- **Функционал комментариев** — иерархическая система комментариев (темы и ответы) на базе пакета `kalnoy/nestedset` с поддержкой вложенности.
- **Seeder комментариев** — генерация тестовых данных для комментариев.
- **Сортировка тем** — темы отсортированы по дате последнего комментария (bump-механика).

### Исправлено
- Настроен алиас `ziggy-js` в `vite.config.js` для корректного резолва пакета Ziggy при сборке.
- Указан полный путь до ESM-модуля Ziggy (`vendor/tightenco/ziggy/dist/index.esm.js`).
- Docker: переключение на зеркало Яндекса (`mirror.yandex.ru`) вместо `deb.debian.org` для ускорения сборки образа.
- Исправлена ошибка с маршрутом `/dashboard`.
- Исправлена JS-ошибка на фронтенде.
- Правки в user seeder.

## 2026-02-17

### Добавлено
- **Инициализация проекта** — Laravel 12 + Inertia.js + Vue 3 + Filament 3.
- **Docker-окружение** — `docker-compose.yml` с сервисами PHP-FPM, Nginx, MySQL 8, Redis, Node (Vite dev-server).
- **Админ-панель (Filament)** — ресурс управления пользователями (`UserResource`).
- **Роли и разрешения** — интеграция `spatie/laravel-permission`, ресурсы `RoleResource` и `PermissionResource` в админ-панели.
- **Политики авторизации** — `UserPolicy`, `RolePolicy`, `PermissionPolicy` с проверкой активности пользователя (`is_active`).
- **IDE Helper** — добавлен `barryvdh/laravel-ide-helper` для автодополнения в IDE.
- **MCP-сервер** — инструкция по подключению к MySQL через MCP.

### Исправлено
- Правки в конфигурации Vite, добавлено сидирование в `composer.json`.
- Конфигурация портов Docker-сервисов.
- Исправлена миграция.
- Изменён порядок заполнения прав доступа при развёртывании проекта.
